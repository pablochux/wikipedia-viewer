function displaySearchError(e){search_result.append('<div class="search-error u-center"><h1 class="search-error__header">'+e+"</h1></div>")}function wikipediaApiSearch(e){var a="http://en.wikipedia.org/w/api.php?format=json&action=query&generator=search&gsrnamespace=0&gsrlimit=10&prop=pageimages|extracts&pilimit=max&exintro&explaintext&exsentences=1&exlimit=max&gsrsearch=";$.ajax({type:"GET",url:a+e+"&callback=?",contentType:"application/json; charset=utf-8",async:!1,dataType:"json",success:function(e){search_result.empty(),console.log(e),console.log("Test"),"object"==typeof e.query?displayArticles(e):(console.log("NOTHING"),displaySearchError("The search did not provide any results.")),footer.removeClass("footer--hide")},error:function(e){displaySearchError('The search could not be perfomed. </h1><h3 class="search-error__header">Please, try again in a few moments...</h3>')}})}function displayArticles(e){for(var a in e.query.pages)search_result.append("<div class='search-result-item'><a href='https://en.wikipedia.org/wiki/"+e.query.pages[a].title+"'><h1 class='search-result-item__title'>"+e.query.pages[a].title+"</h1><p class='search-result-item__body'>"+e.query.pages[a].extract+"</p></a></div>");search_result.append('<a href="https://en.wikipedia.org/wiki/Special:Random" class="search-result-item search-result-item--random-article u-center">Random Wikipedia Article</a>')}function performWikiSearch(e){e?wikipediaApiSearch(e):search_input.addClass("search-form__input--empty")}var search=$(".search"),search_form=$(".search-form"),search_input=$(".search-form__input"),search_icon=$(".search-form__icon"),search_result=$(".search-result"),dualPanel_search=$(".dual-panel--search"),dualPanel_link=$(".dual-panel__link"),dualPanel_random=$(".dual-panel--random-article"),footer=$(".footer"),keyTimeout,doneTyppingInterval=400,doneTypping=!1;$(document).ready(function(){dualPanel_search.click(function(){$(this).addClass("dual-panel--active").removeClass("dual-panel--search"),setTimeout(function(){dualPanel_link.hide(),dualPanel_random.hide(),search.removeClass("search--hide"),setTimeout(function(){search_form.removeClass("search-form--hide"),search_input.select()},10)},1e3)}),search_input.keyup(function(){search_form.addClass("search-form--expanded"),search_input.val()||(search_result.empty(),search_form.removeClass("search-form--expanded")),keyTimeout=setTimeout(function(){doneTypping=!0},doneTyppingInterval),setTimeout(function(){doneTypping&&performWikiSearch(search_input.val())},doneTyppingInterval+1)}),search_input.keydown(function(){doneTypping=!1,clearTimeout(keyTimeout)})});